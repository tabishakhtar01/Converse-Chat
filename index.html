<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script defere src="/socket.io/socket.io.js"></script>
    <script defer src="/client.js"></script>
    <!-- <script defer src="client.js"></script> -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Akaya+Kanadaka&family=Ubuntu:wght@300&display=swap" rel="stylesheet">
    <title>Converse</title>
</head>
<body>
    <!-- <form action="">
    <input type="text" id="name">
    <button type="submit" id="ibtn">Save</button>
    </form> -->
    <div class="main-container" id="message-container">
        <!-- <div id="message-container-left"></div>
        <div id="message-container-right"></div> -->
    </div>

        <form action="" id="form-container">
            <div class="center">
            <input type="text" id="input-message" autocomplete="off">
            <button type="submit" id="button">></button>
        </div>
        </form>
</body>
<!-- <script>
    const socket = io();
// const io = window.io = require('socket.io-client');



const formConatiner = document.getElementById('form-container');
const messageContainer = document.getElementById('message-container');
const inputMessage = document.getElementById('input-message');
// const iname = document.getElementById('name');
// const ibtn = document.getElementById('ibtn');

// ibtn.addEventListener('submit',()=>
// {
//     while(!names)
//     {
//         const names = iname.value;
//         appendMessage(`${names} connected, Hii`,'right');
//     }
const names = prompt("Enter your name");
appendMessage(`${names} connected,`,'right');

console.log("working");

socket.on('send-everyone',data => // step 5: connected clients recives the message
{
    // console.log(message);
    appendMessage(`${data.username}: ${data.message}`,'left');
})



socket.emit('new-user',names);



socket.on('new-user-joined',user=>
{
    appendMessage(`${users} joined`,'left');
})

socket.on('user-disconnected',user =>
{
    appendMessage(`${user} disconnected`,'left');
})



formConatiner.addEventListener('submit',(e)=>
{
    e.preventDefault();
    const message = inputMessage.value;
    console.log(message);
    socket.emit('send-message',message); //step 2 seding/emiting message to the server
    inputMessage.value = "";
    appendMessage(`${message}`,'right');
})

function appendMessage(data,position)  // function for appending message on the div
{  
    const messageBody = document.createElement('div');
    messageBody.innerText = data;
    messageBody.classList.add('message');
    messageBody.classList.add(position);
    messageContainer.append(messageBody);
    scrollPage();
}

function scrollPage()
{
    messageContainer.scrollTop =  messageContainer.scrollHeight;
}

</script> -->
</html>